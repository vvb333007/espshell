<!DOCTYPE html>
<html lang="ru">
<head>
  <title>ESPShell : Файловые системы</title>
  <link rel="stylesheet" href="espshell.css">
  <meta charset="UTF-8">
</head>
<body>
<p align=center><a href="index.html"><img src="i/espshell_logo.jpg" alt="ESPShell для Arduino :: Файловые системы" width="70%" height="70%" /></a></p>
<h3 align=center><a href="Filesystems.ru.html">[ На русском ]</a>&nbsp;&harr;&nbsp;<a href="Filesystems.html">[ English ]</a></h3>
<p>
  <ul>
    <li><a href="#fs">Файловые системы ESP32</a></li>
    <li><a href="#purpose">Назначение файлового менеджера ESPShell</a></li>
    <li><a href="#cmds">Команды файлового менеджера</a></li>
    <li>&nbsp;&nbsp;<a href="#mount0">Показать таблицу разделов и смонтированные файловые системы: "<b>mount</b>"</a></li>
    <li>&nbsp;&nbsp;<a href="#mount">Монтировать раздел</a></li>
    <li>&nbsp;&nbsp;<a href="#unmount">Размонтировать ранее смонтированный раздел: "unmount [path]"</a></li>
    <li>&nbsp;&nbsp;<a href="#format">Форматировать файловую систему: "<b>format</b> [label]"</a></li>
    <li>&nbsp;&nbsp;<a href="#ls">Список файлов в каталоге: "<b>ls</b> [path]"</a></li>
    <li>&nbsp;&nbsp;<a href="#cd">Сменить каталог: "<b>cd</b> [path|..]"</a></li>
    <li>&nbsp;&nbsp;<a href="#rm">Удалить файлы/каталоги: "<b>rm</b> path"</a></li>
    <li>&nbsp;&nbsp;<a href="#write">Записать байты: "<b>write</b> path [text]"</a></li>
    <li>&nbsp;&nbsp;<a href="#append">Дописать байты: "<b>append</b> path text"</a></li>
    <li>&nbsp;&nbsp;<a href="#insert">Вставить байты в текстовый файл: "<b>insert</b> path line_num [text]"</a></li>
    <li>&nbsp;&nbsp;<a href="#delete">Удалить строки из текстового файла: "<b>delete path</b> line_num [count]"</a></li>
    <li>&nbsp;&nbsp;<a href="#mkdir">Создать каталог(и): "<b>mkdir</b> path1 path2 ... pathn"</a></li>
    <li>&nbsp;&nbsp;<a href="#touch">Создать или обновить метки времени у файла(ов): "<b>touch</b> path1 path2 ... pathn"</a></li>
    <li>&nbsp;&nbsp;<a href="#cat">Показать/отправить текстовый или бинарный файл: "<b>cat</b> [-n|-b] path [line_num [count]] [uart num]"</a></li>
    <li>&nbsp;&nbsp;<a href="#mv">Переместить/переименовать файлы или каталоги: "<b>mv</b>"</a></li>
    <li>&nbsp;&nbsp;<a href="#cp">Копировать файлы или каталоги: "<b>cp</b>"</a></li>
    <li>&nbsp;&nbsp;<a href="#show">Показать информацию: "<b>show mount</b> [PATH]"</a></li>
  </ul>
</p>

<p><h2 id=fs><a href="#top">&#8686;</a>ФАЙЛОВЫЕ СИСТЕМЫ ESP32</h2></p>

<p>
По состоянию на 2024 год, в проектах ESP32 на базе IDF и Arduino обычно используются три файловые системы: LittleFS, FAT и SPIFFS (последняя скоро будет устаревшей).
Все три файловые системы поддерживаются в мини-файловом менеджере ESPShell.
</p><p>
Для тестирования доступен пример файла "partitions.csv", в котором описаны все три файловые системы. Этот файл, если он находится в каталоге проекта, будет использоваться при загрузке прошивки.
</p><p>
Поддерживаются следующие типы носителей:
</p><p>
<ul>
  <li>Встроенная флэш-память: здесь размещается прошивка (скетч).</li>
  <li>SD-карта по SPI-интерфейсу.</li>
</ul>
</p><p>
SDMMC с полноценной 4-битной шиной данных — самый быстрый способ чтения/записи на SD-карты. Однако на многих отладочных платах подключена только одна линия данных (например, у ESP32Cam). Тем не менее, даже SDMMC в 1-битном режиме быстрее, чем SD по SPI.
</p>

<p><h2 id=purpose><a href="#top">&#8686;</a>НАЗНАЧЕНИЕ ФАЙЛОВОГО МЕНЕДЖЕРА ESPSHELL</h2></p>

<p>
Основная цель файлового менеджера ESPShell — копирование, перемещение, переименование и удаление файлов и каталогов, которые могут использоваться в прошивке. Это, например, конфигурационные файлы, изображения с камеры, страницы веб-сервера, логи и т.д.
</p><p>
ESPShell позволяет выполнять операции копирования и перемещения между разными файловыми системами. Например, файл можно переместить из FAT в LittleFS.
</p><p>
Поддерживаются SD-карты, подключенные по шине SPI.
</p><p>
Кроме того, ESPShell предоставляет базовые функции редактирования бинарных и текстовых файлов. Пользователь может создавать файлы, дописывать строки или байты, вставлять или удалять строки в текстовых файлах.
</p>

<p><h2 id=cmds><a href="#top">&#8686;</a>КОМАНДЫ ФАЙЛОВОГО МЕНЕДЖЕРА</h2></p>

<p>
Чтобы войти в режим файлового менеджера, введите "<b>files</b>" и нажмите &lt;Enter&gt;:
</p><p><pre>
  esp32#>files
  % Entering filesystem configuration mode. Ctrl+Z or "exit" to return
  % Main commands are still avaiable (but not visible in "?" command list)
  esp32#(/)>
</pre>
</p><p>
Теперь в командной строке отображается текущий рабочий каталог в скобках. Это называется корневым каталогом. Он виртуальный и не может использоваться как обычный каталог: нельзя создать в нём файлы или папки. Он используется исключительно для хранения точек монтирования.
</p><p>
Точка монтирования — это каталог, имя которого начинается с "/", например, "/wwwroot", где размещается реальная файловая система.
</p><p>
ПРИМЕЧАНИЕ: если вы хотите использовать пробелы (" ") в пути, то просто напишите ваш путь в двойных кавычках. А можно использовать вместо пробелов звёздочку "*". 
ESPShell автоматически заменит звёздочки на пробелы. ESPShell не поддерживает:
</p><p><ul><li>
  автодополнение имён файлов, </li><li>
  wildcards</li></ul>
</p><p>
Теперь давайте рассмотрим команды файлового менеджера (выйти из режима можно нажатием Ctrl+Z или вводом "exit" + Enter):
</p><p><pre>
  esp32#(/)>?
  % Enter "? command" to get details about specific command.
  % Enter "? keys" to display the espshell keyboard help page
  %
  % "?"          : Список команд и помощь
  % "mount"      : Смонтировать раздел / Показать таблицу разделов
  % "unmount"    : Размонтировать раздел
  % "ls"         : Список каталога
  % "pwd"        : Показать текущий каталог
  % "cd"         : Сменить каталог
  % "rm"         : Удалить файлы
  % "mv"         : Переместить/переименовать файлы
  % "cp"         : Копировать файлы
  % "write"      : Записать байты
  % "append"     : Дописать байты
  % "insert"     : Вставить байты
  % "delete"     : Удалить строки
  % "mkdir"      : Создать каталог
  % "cat"        : Показать текстовый/бинарный файл
  % "touch"      : Обновить метку времени / создать файл
  % "format"     : Стереть старую и создать новую файловую систему
  % "exit"       : Выйти
  esp32#(/)>
</pre>
</p>
<p><h3 id=mount0><a href="#top">&#8686;</a>ПОКАЗАТЬ ТАБЛИЦУ РАЗДЕЛОВ И СМОНТИРОВАННЫЕ ФАЙЛОВЫЕ СИСТЕМЫ: "mount"</h3></p>
<p>
Команда без аргументов отображает таблицу разделов и информацию о смонтированных файловых системах (команда "mount" сокращена до "m"):
</p><p><pre>
  esp32#(/)>m
  %  Partition label |   Type    |   Size  |    Mounted on    |Total(Kb)|Free(Kb)
  % -----------------+-----------+---------+------------------+---------+--------
  %              nvs | NVStorage |    20Kb |                  |         |
  %          otadata |  OTA data |     8Kb |                  |         |
  %          wwwroot | FAT/exFAT |   960Kb |          /wwwroot|     920 |    920
  %             pr0n |    SPIFFS |   480Kb |                  |         |
  %             logs |  LittleFS |   480Kb |             /logs|     480 |    464
  %         coredump | Core dump |    64Kb |                  |         |
  %
  % 3 mountable partitions found
  esp32#(/)>
</pre>
Вывод выше показывает, что есть 3 различных раздела, два из которых смонтированы по путям "/wwwroot" и "/logs". Столбец "Size" показывает размер файловой системы на флеш-памяти. Столбцы "Total" и "Free" показывают общий и свободный объём файловой системы соответственно.
</p>

<p><h3 id=mount><a href="#top">&#8686;</a>МОНТИРОВАТЬ РАЗДЕЛ: "mount LABEL [/PATH]"</h3></p>
<p>
Эта команда с одним или двумя аргументами монтирует файловую систему, находящуюся на разделе с указанной меткой LABEL, в указанный путь /PATH.
Если /PATH (точка монтирования) не задан, он автоматически формируется путём объединения "/" и имени метки раздела (как показано выше).
</p><p>
Если файловая система не монтируется, она будет отформатирована, после чего монтирование будет повторено.
</p><p>
LABEL можно указывать укороченно, но это не влияет на итоговую точку монтирования — она всё равно формируется по полному имени метки:
</p><p><pre>
  esp32#(/)>mount www
  %  FAT/exFAT  on partition "wwwroot" is mounted under "/wwwroot"
  esp32#(/)>
</pre>
Здесь мы использовали укороченную метку ("www" вместо "wwwroot"), но она была распознана как полное имя. Путь монтирования был опущен, поэтому он сгенерирован автоматически из имени метки.
</p><p>
После монтирования файловая система становится доступной по пути /PATH (в данном случае — /wwwroot): пользователь может выполнить "cd /wwwroot" и исследовать/изменять содержимое.
</p><p>
Пример: смонтировать файловую систему с раздела "wwwroot" в точку "/my/point":
<pre>
  esp32#(/)>mount wwwroot /my/point
  %  FAT/exFAT  on partition "wwwroot" is mounted under "/my/point"
  esp32#(/)>
</pre>
</p>

<p><h3 id=sd><a href="#top">&#8686;</a>МОНТИРОВАНИЕ SD-КАРТЫ</h3></p>

<p>
"mount spi1|spi2|spi3|hspi|fspi|vspi MOSI MISO CLK CS [FREQ_KHZ] [/PATH]"
</p><p>
SD-карта может быть смонтирована по SPI-шине с помощью приведённой выше команды. Первый аргумент указывает, какой SPI-интерфейс использовать. Самый безопасный выбор — "hspi", он работает на всех моделях ESP32. Поддерживаются оба соглашения об именовании SPI-интерфейсов: Arduino (hspi, vspi) и ESP-IDF (spi1, spi2 и т. д.).
</p><p>
MOSI, MISO, CLK и CS — это пины SPI-шины (GPIO, к которым подключена SD-карта).
</p><p>
FREQ_KHZ — необязательный параметр, определяющий частоту SPI-шины. По умолчанию SD-карты работают на частоте 20 МГц. Однако при использовании длинных проводов (например, на макетных платах) рекомендуется понижать частоту (вплоть до 400 кГц) для предотвращения ошибок передачи данных.
</p>

<p><h3 id=unmount><a href="#top">&#8686;</a>РАЗМОНТИРОВАТЬ РАЗДЕЛ, СМОНТИРОВАННЫЙ ЧЕРЕЗ "MOUNT": "unmount [PATH]"</h3></p>

<p>
Противоположность команде "mount": выполняет размонтирование файловой системы. Принимает один необязательный аргумент — путь монтирования.
Если путь не указан, он определяется из текущей рабочей директории:
</p><p><pre>
  esp32#(/wwwroot/1/2/)>unmount
  % Unmounted  FAT/exFAT  partition "/wwwroot"
  esp32#(/)>
</pre>
Также доступна команда "umount", являющаяся алиасом для "unmount".
</p>

<p><h3 id=format><a href="#top">&#8686;</a>ФОРМАТИРОВАНИЕ ФАЙЛОВОЙ СИСТЕМЫ: "format [LABEL]"</h3></p>

<p>
Команда "format" используется для форматирования раздела, указанного по LABEL.
Если LABEL не указан, ESPShell определяет метку раздела по текущей директории:
</p><p><pre>
  esp32#(/wwwroot/)>format
  % Formatting partition "wwwroot", file system type is " FAT/exFAT "
  % done
  esp32#(/wwwroot/)>
</pre>
Тип файловой системы определяется в файле partitions.csv и не может быть изменён во время выполнения.
Для FAT выполняется быстрое форматирование (таблицы размещения очищаются, данные не затираются).
</p>

<p><h3 id=ls><a href="#top">&#8686;</a>СПИСОК ФАЙЛОВ В ДИРЕКТОРИИ: "ls [PATH]"</h3></p>

<p>
Команда "ls" отображает содержимое директории. Если PATH не указан, используется текущая директория:
<pre>
  esp32#(/wwwroot/)>ls
  %    Size        Modified          *  Name
  %               -- level up --    DIR [..]
  %       171  1980-01-01 01:43:26  DIR [index]
  %       146  1980-01-01 01:43:26  DIR [logs]
  %         0  1980-01-01 01:43:26  DIR [uphp]
  %         0  1980-01-01 01:43:26  DIR [tmp]
  %        57  1980-01-01 01:46:18      index.html
  %
  % 4 directories, 1 file, 374 bytes
  esp32#(/wwwroot/)>
</pre>
Выводимые данные включают: время последнего изменения, размер файла в байтах, тип (директории помечены как DIR, файлы — нет) и имя.
</p><p>
Подробности:
</p><p>
  Size: размер файла или директории в байтах<br />
  Modified: дата и время последнего изменения<br />
  Type: директории помечаются как DIR, файлы — без пометок<br />
  Name: имя файла или директории (имена директорий отображаются в квадратных скобках)<br />
  Специальный каталог [..] означает «на уровень выше»
</p><p>
Файлы отображаются в порядке создания, без сортировки.
</p><p>
Пример: вывод содержимого директории /wwwroot/index/:
<pre>
  esp32#(/)>ls wwwroot/index
  %    Size        Modified          *  Name
  %               -- level up --    DIR [..]
  %        57  1980-01-01 01:45:00      index.php
  %        57  1980-01-01 01:45:16      index_old.php
  %        57  1980-01-01 01:45:26      index_html
  %
  % 0 directories, 3 files, 171 bytes
  esp32#(/)>
</pre>
Путь (PATH) должен указывать на директорию, с / или без него на конце.
</p><p>
Важно: по умолчанию ls рекурсивно вычисляет общий размер директорий. Это может замедлить выполнение и потреблять память. Чтобы отключить это поведение, выполните:
<pre>
  var ls_show_dir_size 0
</pre>
</p>

<p><h3 id=cd><a href="#top">&#8686;</a>СМЕНА ДИРЕКТОРИИ: "cd [PATH|..]"</h3></p>

<p>
Команда "cd" поддерживает три варианта:
</p><p>
  1. "cd" — без параметров: перейти в корень текущей смонтированной ФС (не путать с глобальным "/"):
<pre>
        esp32#(/wwwroot/1/2/)>cd
        esp32#(/wwwroot/)>
</pre>
</p><p>
  2. "cd .." — перейти на уровень вверх. Путь вроде "../../" не поддерживается. 
  Если родительской директории не существует, переход осуществляется к ближайшей существующей:
<pre>
       esp32#(/)>mount wwwroot /a/mount/point
       %  FAT/exFAT  on partition "wwwroot" is mounted under "/a/mount/point"
       esp32#(/)>cd /a/mount/point
       esp32#(/a/mount/point/)>cd ..
       esp32#(/)>
</pre>
  В данном случае команда возвращает нас в "/", так как путь монтирования рассматривается как единый виртуальный путь.
</p><p>
  3. "cd PATH" — перейти в директорию PATH. Абсолютные пути начинаются с точки монтирования.<br />
  Относительные пути задаются от текущей директории.
<pre>
       esp32#(/wwwroot/)>cd test_dir/dir2
       esp32#(/wwwroot/test_dir/dir2/)>cd
       esp32#(/wwwroot/)>cd ..
       esp32#(/)>
</pre>
</p>

<p><h3 id=rm><a href="#top">&#8686;</a>УДАЛЕНИЕ ФАЙЛОВ И ДИРЕКТОРИЙ: "rm PATH"</h3></p>

<p>
Удаляет указанный файл или директорию:
</p><p>
<ul>
  <li>Если PATH — файл, он будет удалён.</li>
  <li>Если PATH — директория, она и всё её содержимое будут удалены рекурсивно, без подтверждения.</li>
</ul>
<pre>
  esp32#(/)>ls wwwroot/test_dir
  % Size/Used      Modified          *  Name
  %               -- level up --    DIR [..]
  %            1980-01-01 01:00:24  DIR [dir2]
  %         4  1980-01-01 01:16:20      test.cfg
  % 1 directory, 1 file, 4 bytes

  esp32#(/)>rm wwwroot/test_dir
  % Directory removed: "/wwwroot/test_dir/dir2/"
  % File removed: "/wwwroot/test_dir/test.cfg"
  % Directory removed: "/wwwroot/test_dir/"
  % 3 files/directories were deleted
  esp32#(/)>
</pre>
Удаление директорий из корня "/" (виртуальный корень всех точек монтирования) невозможно: например, "rm /wwwroot" не сработает. Используйте для этого команду unmount.
</p>

<p><h3 id=write><a href="#top">&#8686;</a>ЗАПИСЬ БАЙТ В ФАЙЛ: "write PATH [TEXT]"</h3></p>
<p>
Записывает строку байтов или символов в файл. Если файл не существует — создаётся. Если существует — содержимое перезаписывается полностью.
</p><p>
Чтобы дописать или изменить данные без перезаписи, используйте команды "append", "insert" или "delete".
</p><p>
Аргумент TEXT может содержать:
</p><p>
  обычные символы, пробелы, escape-последовательности:
<pre>
    \\  = обратный слэш
    \n  = перевод строки
    \r  = возврат каретки
    \t  = табуляция
    \AB = байт с шестнадцатеричным значением AB
</pre>
Если TEXT опущен, записывается перевод строки (\n).
</p><p>
Пример 1: создать или перезаписать test.cfg с "Hello World!" и строкой байт 61 62 63 64 65 \n:
<pre>
  esp32#(/wwwroot/)>write test.cfg Hello World\n\61\62\63\64\65\n
  % 18 bytes written
  esp32#(/wwwroot/)>
</pre>
Если в пути указаны несуществующие директории, они будут созданы автоматически.
</p>

<p><h3 id=append><a href="#top">&#8686;</a>ДОБАВЛЕНИЕ БАЙТ: "append PATH TEXT"</h3></p>

<p>
Добавляет данные в конец существующего файла. Работает как write, но не затирает данные:
<pre>
  esp32#(/wwwroot/)>append test.cfg \nNew line
  % 9 bytes written
  esp32#(/wwwroot/)>
</pre>
Используйте "write" для перезаписи файла, "insert"/"delete" — для изменения строк.
</p>
<p><h3 id=insert><a href="#top">&#8686;</a>ВСТАВКА БАЙТ В ТЕКСТОВЫЙ ФАЙЛ: "insert PATH LINE_NUM [TEXT]"</h3></p>

<p>
Вставляет TEXT (который может содержать несколько строк, разделённых символами \n) перед строкой с номером LINE_NUM в файле по пути PATH.<br>
Примечание: В конец каждой вставляемой строки автоматически добавляется символ новой строки (\n) — нет необходимости вручную добавлять \n в конец каждой строки, если только вы не вставляете несколько строк.
</p><p>

  Пример: Отобразить файл и вставить в него многострочную строку:
<pre>
  esp32#(/wwwroot/)>cat -n index.html
     1: <html>
     2: <head></head>
     3: <body>
     4: Hello World!
     5: </body>
     6: </html>
     7:
  esp32#(/wwwroot/)>insert index.html 4 Hey! This line was inserted!\nAnd this line also!
  %% Line inserted
  esp32#(/wwwroot/)>cat -n index.html
     1: <html>
     2: <head></head>
     3: <body>
     4: Hey! This line was inserted!
     5: And this line also!
     6: Hello World!
     7: </body>
     8: </html>
     9:
  esp32#(/wwwroot/)>
</pre>
Как и в команде write, поддерживаются escape-последовательности, такие как \n, \r, \t и \XX (шестнадцатеричный байт).<br>
Если TEXT полностью опущен, будет вставлена одна пустая строка (перенос строки).
</p>

<p><h3 id=delete><a href="#top">&#8686;</a>УДАЛЕНИЕ СТРОК ИЗ ТЕКСТОВОГО ФАЙЛА: "delete PATH LINE_NUM [COUNT]"</h3></p>

</p>
Удаляет COUNT строк, начиная с строки под номером LINE_NUM в файле по пути PATH.<br>
Если COUNT опущен, по умолчанию удаляется 1 строка:
<pre>
  esp32#(/wwwroot/)>cat -n index.html
   1: <html>
   2: <head></head>
   3: <body>
   4: Hey! This line was inserted!
   5: And this line also!
   6: Hello World!
   7: </body>
   8: </html>
   9:
  esp32#(/wwwroot/)>delete index.html 4 2
  % 2 lines deleted starting at line 4
  esp32#(/wwwroot/)>cat -n index.html
   1: <html>
   2: <head></head>
   3: <body>
   4: Hello World!
   5: </body>
   6: </html>
   7:
</pre>
</p>

<p><h3 id=mkdir><a href="#top">&#8686;</a>СОЗДАНИЕ КАТАЛОГОВ: "mkdir PATH1 PATH2 ... PATHn"</h3></p>

<p>
Создаёт один или несколько каталогов. Поддерживается создание вложенных путей — например, команда "mkdir 1/2/3/4" создаст все отсутствующие промежуточные каталоги.
</p><p>
Пример 1: Создание нескольких каталогов в /wwwroot
<pre>
  esp32#(/)>cd wwwroot
  esp32#(/wwwroot/)>mkdir 1 2 3
  % Directory created: "/wwwroot/1/"
  % Directory created: "/wwwroot/2/"
  % Directory created: "/wwwroot/3/"
  esp32#(/wwwroot/)>
</pre>

Эта команда не может создавать каталоги напрямую в корневом каталоге / — используйте команду "mount" для создания или определения новых точек монтирования в /.
</p><p>
ПРИМЕЧАНИЕ по путям с пробелами:<br>
Если вам нужно использовать пробелы в именах файлов или каталогов, можно написать тмя в двойных кавычках: <b>&quot;</b>Program Files<b>&quot;</b>, а можно - используовать вместо пробела символ звёздочки (*).<br>
ESPShell автоматически заменит звёздочки на пробелы при обработке пути.
</p><p>
  Пример:
<pre>
  esp32#(/wwwroot/)>mkdir My*Documents
  % Directory created: "/wwwroot/My Documents/"
  esp32#(/wwwroot/)>mkdir "Program Files"
  % Directory created: "/wwwroot/Program Files/"

</pre>

</p>

<p><h3 id=touch><a href="#top">&#8686;</a>СОЗДАНИЕ НОВЫХ ФАЙЛОВ ИЛИ ОБНОВЛЕНИЕ МЕТКИ ВРЕМЕНИ: "touch PATH1 PATH2 ... PATHn"</h3></p>
<p>
Эта команда работает аналогично команде `touch` в Linux:
</p><p>
  Создаёт пустые файлы, если они не существуют.<br>
  Обновляет метку времени изменения для существующих файлов.<br>
  Если указанный путь включает подкаталоги, ESPShell автоматически создаст все необходимые каталоги.<br>
</p><p>
  Пример 1: Создание нескольких новых файлов в текущем каталоге
<pre>
  esp32#(/wwwroot/)>touch file1.txt file2.txt file3.txt
  % File created: "/wwwroot/file1.txt"
  % File created: "/wwwroot/file2.txt"
  % File created: "/wwwroot/file3.txt"
  esp32#(/wwwroot/)>
</pre>

  Пример 2: Обновление времени последнего изменения существующего файла
<pre>
  esp32#(/wwwroot/)>touch file1.txt
  esp32#(/wwwroot/)>
</pre>

  Пример 3: Создание файла во вложенном каталоге (с автосозданием недостающих папок)
<pre>
  esp32#(/wwwroot/)>touch dir1/dir2/config.json
  % Directory created: "/wwwroot/dir1/"
  % Directory created: "/wwwroot/dir1/dir2/"
  % File created: "/wwwroot/dir1/dir2/config.json"
  esp32#(/wwwroot/)>
</pre>
</p>

<p><h3 id=cat><a href="#top">&#8686;</a>ОТОБРАЖЕНИЕ/ПЕРЕДАЧА ТЕКСТОВОГО/БИНАРНОГО ФАЙЛА: "cat [-n|-b] PATH [LINE_NUM [COUNT]] [uart NUM]"</h3></p>

</p>
Эта команда отображает содержимое файла (текстового или бинарного) или передаёт его по интерфейсу UART.<br>
В отличие от Linux, команда cat в ESPShell не поддерживает объединение нескольких файлов (нельзя использовать для склейки файлов).
</p><p>
ОСНОВНОЕ ИСПОЛЬЗОВАНИЕ
</p><p>
Чтобы вывести файл как обычный текст:
<pre>
  esp32#(/wwwroot/)>cat index.html
  <html>
  <head></head>
  <body>
  Hey! This line was inserted!
  And this line also!
  Hello World!
  </body>
  </html>
  esp32#(/wwwroot/)>
</pre>
</p><p>
ОТОБРАЖЕНИЕ ОПРЕДЕЛЁННЫХ СТРОК
</p><p>
Можно использовать аргументы LINE_NUM и COUNT, чтобы вывести только часть файла:
<pre>
  esp32#(/wwwroot/)>cat index.html 4 2
  Hey! This line was inserted!
  And this line also!
  esp32#(/wwwroot/)>
</pre>
ПОКАЗ НОМЕРОВ СТРОК
</p><p>
Используйте флаг -n для вывода номеров строк. Полезно при работе с insert и delete:
<pre>
   esp32#(/wwwroot/)>cat -n index.html
   1: <html>
   2: <head></head>
   3: <body>
   4: Hey! This line was inserted!
   5: And this line also!
   6: Hello World!
   7: </body>
   8: </html>
   esp32#(/wwwroot/)>
</pre>
ОТОБРАЖЕНИЕ ФАЙЛА В ВИДЕ ДВОИЧНОГО (HEX + ASCII)
</p><p>
Флаг -b интерпретирует содержимое как бинарные данные и отображает их в виде hex-дампа:
<pre>
  esp32#(/wwwroot/)>cat -b index.html
         0  1  2  3   4  5  6  7   8  9  A  B   C  D  E  F  |0123456789ABCDEF
  ----------------------------------------------------------+----------------
  0000: 3c 68 74 6d  6c 3e 0a 3c  68 65 61 64  3e 3c 2f 68  |<html>.<head></h
  0010: 65 61 64 3e  0a 3c 62 6f  64 79 3e 0a  48 65 79 21  |ead>.<body>.Hey!
  0020: 20 54 68 69  73 20 6c 69  6e 65 20 77  61 73 20 69  | This line was i
  0030: 6e 73 65 72  74 65 64 21  0a 41 6e 64  20 74 68 69  |nserted!.And thi
  0040: 73 20 6c 69  6e 65 20 61  6c 73 6f 21  0a 48 65 6c  |s line also!.Hel
  0050: 6c 6f 20 57  6f 72 6c 64  21 0a 0a 0a  3c 2f 62 6f  |lo World!...</bo
  0060: 64 79 3e 0a  3c 2f 68 74  6d 6c 3e 0a  0a           |dy>.</html>..
  % EOF (109 bytes)
  esp32#(/wwwroot/)>
</pre>

ПЕРЕДАЧА ФАЙЛА ПО UART
</p><p>
Команда cat также может использоваться для передачи содержимого файла по инициализированному UART-интерфейсу.<br>
При использовании флага -b файл передаётся как есть (в бинарном виде), без форматирования или номеров строк.
</p><p>
Это особенно полезно для передачи файлов на устройства, подключённые по UART. Например, модуль SIM7600 LTE с 64 ГБ встроенной памяти может использоваться для отправки больших файлов по LTE. Передача обрабатывается самим модулем, снижая нагрузку на основной процессор.
<pre>
  esp32#(/wwwroot/)>cat -b firmware.bin uart 2
  % Binary file sent over UART2 (14832 bytes)
  esp32#(/wwwroot/)>
</pre>
</p>


<p><h3 id=mv><a href="#top">&#8686;</a>ПЕРЕМЕЩЕНИЕ/ПЕРЕИМЕНОВАНИЕ ФАЙЛОВ И КАТАЛОГОВ: "mv"</h3></p>
<p><h3 id=cp><a href="#top">&#8686;</a>КОПИРОВАНИЕ ФАЙЛОВ И КАТАЛОГОВ: "cp"</h3></p>
<p><h3 id=show><a href="#top">&#8686;</a>ОТОБРАЖЕНИЕ ИНФОРМАЦИИ</h3></p>

<p>
"show mount [/PATH]" 
</p><p>
Команда "show mount" выводит информацию о смонтированных файловых системах.<br>
Без аргументов показывает список доступных разделов и точек монтирования для уже смонтированных разделов:
<pre>
    esp32#>sh mount
    % Disk partition |M|File system| Size on |    Mounted on    |Capacity |  Free
    %    label       |?|   type    |  flash  |                  |  total  |  space
    % ---------------+-+-----------+---------+------------------+---------+---------
    %             nvs| | NVStorage |     20K |                  |         |
    %         otadata| |  OTA data |      8K |                  |         |
    %         wwwroot|+| FAT/exFAT |    960K |         /wwwroot |    916K |    916K
    %            pr0n|+|    SPIFFS |    480K |                  |         |
    %            logs|+|  LittleFS |    480K |                  |         |
    %        coredump| | Core dump |     64K |                  |         |
    %
    % 3 mountable partitions found. (+) - mountable partition
    esp32#>
</pre>
Эта команда является псевдонимом для команды "mount", работающей с файловыми системами.
</p><p>
При использовании с аргументом (путь к каталогу) отображает информацию о конкретной точке монтирования:
<pre>
    esp32#>sh mount /w
    % Mount point "/wwwroot",  FAT/exFAT , (partition label is "wwwroot")
    % Wear-levelling layer is active on this media
    % Filesystem is located on internal SPI FLASH
    esp32#>
</pre>
</p>
</body>
</html>
